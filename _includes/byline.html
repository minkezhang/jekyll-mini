{% comment %}

Article byline component.

include.author string: Key of the author defined in site.data.authors
        date string: Jekyll date string defined in the Post path or front matter
        categories []string: Defined in front matter
        tags []string: Defined in front matter
        link bool: Include link to collections page.

{% endcomment %}

{% assign slug = site.categories.slugify.mode %}


<div class="byline">

  <div>
    {% if include.author and site.data.authors[include.author] %}
      {% assign a = site.data.authors[include.author] %}
      <address>{{ a.name }}</address>
    {% endif %}

    <time class="post-date" datetime="{{ include.date | date:"%Y-%m-%d" }}">
      {{ include.date | date_to_string }}
    </time>
  </div>

  {% if include.categories or include.tags %}
    <div>
      {% assign ls = "" | split: ", " %}

      {% for l in include.categories %}
        {% if include.link == true %}
          {% capture m %}
            <a href="/category/{{ l | slugify slug }}">{{ l }}</a>
          {% endcapture %}
          {% assign ls = ls | push: m %}
        {% else %}
          {% assign ls = ls | push: l %}
        {% endif %}
      {% endfor %}

      {% for l in include.tags %}
        {% if include.link == true %}
          {% capture m %}
            <a href="/tag/{{ l | slugify slug }}">{{ l }}</a>
          {% endcapture %}
          {% assign ls = ls | push: m %}
        {% else %}
          {% assign ls = ls | push: l %}
        {% endif %}
      {% endfor %}

      {% if ls.size > 0 %}
        {{ ls | array_to_sentence_string }}
      {% endif %}
    </div>
  {% endif %}

</div>
